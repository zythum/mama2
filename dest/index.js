!function e(t,o,n){function i(s,a){if(!o[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=o[s]={exports:{}};t[s][0].call(l.exports,function(e){var o=t[s][1][e];return i(o?o:e)},l,l.exports,e,t,o,n)}return o[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t){function o(e,t){return void 0===e?t:e}function n(e){var t=[];for(one in e)e.hasOwnProperty(one)&&t.push([one,e[one]].join("="));return t.join("&")}function i(e,t){return e+(e.indexOf("?")?"?":"&")+t}function r(e){var t=o(e.url,""),r=n(o(e.param,{})),c=o(e.method,"GET"),l=o(e.callback,a),d=o(e.contentType,"json"),u=o(e.context,null);if(e.jsonp)return s(i(t,r),l.bind(u),"string"==typeof e.jsonp?e.jsonp:void 0);var h=new XMLHttpRequest;"get"===c&&(t=i(t,r),r=""),h.open(c,t,!0),h.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),h.send(r),h.onreadystatechange=function(){if(4===h.readyState){if(200===h.status){var e=request.responseText;if("json"===d.toLowerCase())try{e=JSON.parse(e)}catch(t){e=-1}return l.call(u,e)}return l.call(u,-1)}}}var s=e("./jsonp"),a=e("./noop"),n=e("./queryString");t.exports=r},{"./jsonp":7,"./noop":10,"./queryString":13}],2:[function(e,t){t.exports=!!document.createElement("video").canPlayType("application/x-mpegURL")},{}],3:[function(e,t){function o(e,t){var o=document.createElement(e);if("function"==typeof t)t.call(o);else for(var n in t)if(t.hasOwnProperty(n))switch(n){case"appendTo":t[n].appendChild(o);break;case"innerHTML":case"className":case"id":o[n]=t[n];break;case"style":var i=t[n];for(var r in i)i.hasOwnProperty(r)&&(o.style[r]=i[r]);break;default:o.setAttribute(n,t[n]+"")}return o}t.exports=o},{}],4:[function(e){function t(e,t){if(!e)return s("解析内容地址失败",2),void delete window[a];s("解析内容地址完成"+e.map(function(e){return"<a href="+e[1]+">"+e[0]+"</a>"}).join(" "),2);var o=i("div",{appendTo:document.body,style:{position:"fixed",background:"rgba(0,0,0,0.8)",top:"0",left:"0",width:"100%",height:"100%",zIndex:"999999"}});i("div",{appendTo:o,style:{width:"1000px",height:"500px",position:"absolute",top:"50%",left:"50%",marginTop:"-250px",marginLeft:"-500px",borderRadius:"2px",boxShadow:"0 0 2px #000000, 0 0 200px #000000"}});var c=i("div",{appendTo:o,innerHTML:'<div id="MAMA2_video_placeHolder"></div>',style:{width:"1000px",height:"500px",position:"absolute",backgroundColor:"#000000",top:"50%",left:"50%",marginTop:"-250px",marginLeft:"-500px",borderRadius:"2px",overflow:"hidden"}});i("div",{appendTo:c,innerHTML:"&times;",style:{width:"20px",height:"20px",lineHeight:"20px",textAlign:"center",position:"absolute",color:"#ffffff",fontSize:"20px",top:"5px",right:"5px",textShadow:"0 0 2px #000000",fontWeight:"bold",fontFamily:'Garamond, "Apple Garamond"',cursor:"pointer"}}).onclick=function(){document.body.removeChild(o),l.video.src="about:blank",delete window[a]};var l=new r("MAMA2_video_placeHolder","1000x500",e,t);l.iframe.contentWindow.focus(),n(),l.iframe.style.display="block"}var o,n=e("./flashBlocker"),i=e("./createElement"),r=e("./player"),s=e("./log"),a=e("./mamaKey"),c=e("./seekers");1!=window[a]&&(c.forEach(function(e){o!==!0&&!!e.match()==!0&&(s("开始解析内容地址"),o=!0,e.getVideos(t))}),void 0===o&&(delete window[a],s("对不起，没有找到可以解析的内容",2)))},{"./createElement":3,"./flashBlocker":5,"./log":8,"./mamaKey":9,"./player":11,"./seekers":18}],5:[function(e,t){var o='<div style="text-shadow:0 0 2px #eee;letter-spacing:-1px;background:#eee;font-weight:bold;padding:0;font-family:arial,sans-serif;font-size:30px;color:#ccc;width:152px;height:52px;border:4px solid #ccc;border-radius:12px;position:absolute;top:50%;left:50%;margin:-30px 0 0 -80px;text-align:center;line-height:52px;">Flash</div>',n=0,i={},r=function(){var e=this.getAttribute("data-flash-index"),t=i[e];t.setAttribute("data-flash-show","isshow"),this.parentNode.insertBefore(t,this),this.parentNode.removeChild(this),this.removeEventListener("click",r,!1)},s=function(e,t,s){var a=n++,c=document.defaultView.getComputedStyle(e,null),l=c.position;l="static"===l?"relative":l;var d=c.margin,u="inline"==c.display?"inline-block":c.display,c=["","width:"+t+"px","height:"+s+"px","position:"+l,"margin:"+d,"display:"+u,"margin:0","padding:0","border:0","border-radius:1px","cursor:pointer","background:-webkit-linear-gradient(top, rgba(240,240,240,1)0%,rgba(220,220,220,1)100%)",""];i[a]=e;var h=document.createElement("div");return h.setAttribute("title","&#x70B9;&#x6211;&#x8FD8;&#x539F;Flash"),h.setAttribute("data-flash-index",""+a),e.parentNode.insertBefore(h,e),e.parentNode.removeChild(e),h.addEventListener("click",r,!1),h.style.cssText+=c.join(";"),h.innerHTML=o,h},a=function(e){if(e instanceof HTMLObjectElement){if(""==e.innerHTML.trim())return;if(e.getAttribute("classid")&&!/^java:/.test(e.getAttribute("classid")))return}else if(!(e instanceof HTMLEmbedElement))return;var t=e.offsetWidth,o=e.offsetHeight;t>160&&o>60&&s(e,t,o)};t.exports=function(){for(var e=document.getElementsByTagName("embed"),t=document.getElementsByTagName("object"),o=0,n=t.length;n>o;o++)t[o]&&a(t[o]);for(var o=0,n=e.length;n>o;o++)e[o]&&a(e[o])}},{}],6:[function(e,t){function o(e,t,o,s,a){a=a||{},n({url:r,param:{params:encodeURIComponent(i(o)),url:encodeURIComponent(e),post:"post"===t?1:0,xml:a.xml?1:0,text:a.text?1:0,gzinflate:a.gzinflate?1:0,ua:a.ua||""},jsonp:!0,callback:s,context:a.context})}var n=(e("./createElement"),e("./ajax")),i=e("./queryString"),r="http://zythum.sinaapp.com/mama2/proxy.php";t.exports=o},{"./ajax":1,"./createElement":3,"./queryString":13}],7:[function(e,t){function o(){return s+a++}function n(e,t,n){n=n||"callback";var s=o();window[s]=function(e){clearTimeout(a),window[s]=r,t(e),document.body.removeChild(l)};var a=setTimeout(function(){window[s](-1)},c),l=i("script",{appendTo:document.body,src:e+(e.indexOf("?")>=0?"&":"?")+n+"="+s})}var i=e("./createElement"),r=e("./noop"),s="MAMA2_HTTP_JSONP_CALLBACK",a=0,c=1e4;t.exports=n},{"./createElement":3,"./noop":10}],8:[function(e,t){function o(e,t){void 0===n&&(n=r("div",{style:{backgroundColor:"#24272A",color:"#ffffff",position:"fixed",zIndex:"1000000",top:"0",left:"0",padding:"5px 10px",fontSize:"14px"}})),clearTimeout(i),n.innerHTML='<span style="color:#DF6558">MAMA2 &gt;</span> '+e,console&&console.log&&console.log("%c MAMA2 %c %s","background:#24272A; color:#ffffff","",e),document.body.appendChild(n),i=setTimeout(function(){document.body.removeChild(n)},1e3*t||s)}var n,i,r=e("./createElement"),s=1e4;t.exports=o},{"./createElement":3}],9:[function(e,t){t.exports="MAMAKEY_田琴是这个世界上最可爱的女孩子呵呵呵呵，我要让全世界都在知道"},{}],10:[function(e,t){t.exports=function(){}},{}],11:[function(e,t){var o;!function n(t,o,i){function r(a,c){if(!o[a]){if(!t[a]){var l="function"==typeof e&&e;if(!c&&l)return l(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var d=o[a]={exports:{}};t[a][0].call(d.exports,function(e){var o=t[a][1][e];return r(o?o:e)},d,d.exports,n,t,o,i)}return o[a].exports}for(var s="function"==typeof e&&e,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t){function o(e){for(var t=[],o=1;o<arguments.length;o++){var i=arguments[o],r=i.init;t.push(r),delete i.init,n(e.prototype,i)}e.prototype.init=function(){t.forEach(function(e){e.call(this)}.bind(this))}}var n=e("./extend");t.exports=o},{"./extend":9}],2:[function(e,t){var o=e("./player.css"),n=e("./player.html"),i=(e("./extend"),e("./createElement")),r=e("./parseDOMByClassNames");t.exports={init:function(){var e=function(){var e=this.iframe.contentDocument.getElementsByTagName("head")[0],t=this.iframe.contentDocument.body;i("style",function(){e.appendChild(this);try{this.styleSheet.cssText=o}catch(t){this.appendChild(document.createTextNode(o))}}),i("link",{appendTo:e,href:"http://libs.cncdn.cn/font-awesome/4.3.0/css/font-awesome.min.css",rel:"stylesheet",type:"text/css"}),t.innerHTML=n,this.DOMs=r(t,["player","video","video-frame","comments","comments-btn","play","progress_anchor","buffered_anchor","fullscreen","allscreen","hd","volume_anchor","current","duration"]),this.video=this.DOMs.video}.bind(this),t=document.getElementById(this.id),s=this.iframe=i("iframe",{allowTransparency:!0,frameBorder:"no",scrolling:"no",src:"about:blank",mozallowfullscreen:"mozallowfullscreen",webkitallowfullscreen:"webkitallowfullscreen",style:{width:this.size[0]+"px",height:this.size[1]+"px",overflow:"hidden"}});t&&t.parentNode?(t.parentNode.replaceChild(s,t),e()):(document.body.appendChild(s),e(),document.body.removeChild(s))}}},{"./createElement":7,"./extend":9,"./parseDOMByClassNames":11,"./player.css":12,"./player.html":13}],3:[function(e,t){function o(e){e.strokeStyle="black",e.lineWidth=3,e.font='bold 20px "PingHei","Lucida Grande", "Lucida Sans Unicode", "STHeiti", "Helvetica","Arial","Verdana","sans-serif"'}var n=(e("./createElement"),.1),i=25,r=4e3,s=document.createElement("canvas").getContext("2d");o(s);var a=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){setTimeout(e,1e3/60)};t.exports={init:function(){this.video.addEventListener("play",this.reStartComment.bind(this)),this.video.addEventListener("pause",this.pauseComment.bind(this)),this.lastCommnetUpdateTime=0,this.lastCommnetIndex=0,this.commentLoopPreQueue=[],this.commentLoopQueue=[],this.commentButtonPreQueue=[],this.commentButtonQueue=[],this.commentTopPreQueue=[],this.commentTopQueue=[],this.drawQueue=[],this.preRenders=[],this.preRenderMap={},this.enableComment=void 0===this.comments?!1:!0,this.prevDrawCanvas=document.createElement("canvas"),this.canvas=this.DOMs.comments.getContext("2d"),this.DOMs.player.classList.add("has-comments"),this.DOMs["comments-btn"].classList.add("enable"),this.DOMs.comments.display=this.enableComment?"block":"none";var e=0,t=function(){(e=~e)&&this.onCommentTimeUpdate(),a(t)}.bind(this);t()},needDrawText:function(e,t,o){this.drawQueue.push([e,0|t,0|o])},drawText:function(){var e=this.prevDrawCanvas,t=this.prevDrawCanvas.getContext("2d");e.width=this.canvasWidth,e.height=this.canvasHeight,t.clearRect(0,0,this.canvasWidth,this.canvasHeight);var n=[];this.preRenders.forEach(function(e,t){e.used=!1,void 0===e.cid&&n.push(t)});for(var r;r=this.drawQueue.shift();)!function(e,r){var s,a=e[0].text+e[0].color,c=r.preRenderMap[a];if(void 0===c){var c=n.shift();void 0===c?(s=document.createElement("canvas"),c=r.preRenders.push(s)-1):s=r.preRenders[c];var l=s.width=e[0].width,d=s.height=i+10,u=s.getContext("2d");u.clearRect(0,0,l,d),o(u),u.fillStyle=e[0].color,u.strokeText(e[0].text,0,i),u.fillText(e[0].text,0,i),s.cid=a,r.preRenderMap[a]=c}else s=r.preRenders[c];s.used=!0,t.drawImage(s,e[1],e[2])}(r,this);this.preRenders.forEach(function(e){e.used===!1&&(delete this.preRenderMap[e.cid],e.cid=void 0)}.bind(this)),this.canvas.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.canvas.drawImage(e,0,0)},createComment:function(e,t){if(void 0===e)return!1;var o=s.measureText(e.text);return{startTime:t,text:e.text,color:e.color,width:o.width+20}},commentTop:function(e,t,o){this.commentTopQueue.forEach(function(t,n){void 0!=t&&(o>t.startTime+r?this.commentTopQueue[n]=void 0:this.needDrawText(t,(e-t.width)/2,i*n))}.bind(this));for(var n;n=this.commentTopPreQueue.shift();)n=this.createComment(n,o),this.commentTopQueue.forEach(function(t,o){n&&void 0===t&&(t=this.commentTopQueue[o]=n,this.needDrawText(t,(e-n.width)/2,i*o),n=void 0)}.bind(this)),n&&(this.commentTopQueue.push(n),this.needDrawText(n,(e-n.width)/2,i*this.commentTopQueue.length-1))},commentBottom:function(e,t,o){t-=10,this.commentButtonQueue.forEach(function(n,s){void 0!=n&&(o>n.startTime+r?this.commentButtonQueue[s]=void 0:this.needDrawText(n,(e-n.width)/2,t-i*(s+1)))}.bind(this));for(var n;n=this.commentButtonPreQueue.shift();)n=this.createComment(n,o),this.commentButtonQueue.forEach(function(o,r){n&&void 0===o&&(o=this.commentButtonQueue[r]=n,this.needDrawText(o,(e-n.width)/2,t-i*(r+1)),n=void 0)}.bind(this)),n&&(this.commentButtonQueue.push(n),this.needDrawText(n,(e-n.width)/2,t-i*this.commentButtonQueue.length))},commentLoop:function(e,t,o){for(var r=t/i|0,s=-1;++s<r;){var a=this.commentLoopQueue[s];if(void 0===a&&(a=this.commentLoopQueue[s]=[]),this.commentLoopPreQueue.length>0){var c=0===a.length?void 0:a[a.length-1];if(void 0===c||(o-c.startTime)*n>c.width){var l=this.createComment(this.commentLoopPreQueue.shift(),o);l&&a.push(l)}}this.commentLoopQueue[s]=a.filter(function(t){var r=(o-t.startTime)*n;return 0>r||r>t.width+e?!1:(this.needDrawText(t,e-r,i*s),!0)}.bind(this))}for(var d=this.commentLoopQueue.length-r;d-->0;)this.commentLoopQueue.pop()},pauseComment:function(){this.pauseCommentAt=Date.now()},reStartComment:function(){if(this.pauseCommentAt){var e=Date.now()-this.pauseCommentAt;this.commentLoopQueue.forEach(function(t){t.forEach(function(t){t&&(t.startTime+=e)})}),this.commentButtonQueue.forEach(function(t){t&&(t.startTime+=e)}),this.commentTopQueue.forEach(function(t){t&&(t.startTime+=e)})}this.pauseCommentAt=void 0},drawComment:function(){if(!this.pauseCommentAt){var e=Date.now(),t=this.DOMs["video-frame"].offsetWidth,o=this.DOMs["video-frame"].offsetHeight;t!=this.canvasWidth&&(this.DOMs.comments.width=t,this.canvasWidth=t),o!=this.canvasHeight&&(this.DOMs.comments.height=o,this.canvasHeight=o);var n=this.video.offsetWidth,i=this.video.offsetHeight;this.commentLoop(n,i,e),this.commentTop(n,i,e),this.commentBottom(n,i,e),this.drawText()}},onCommentTimeUpdate:function(){if(this.enableComment!==!1){var e=this.video.currentTime;if(Math.abs(e-this.lastCommnetUpdateTime)<=1&&e>this.lastCommnetUpdateTime){var t=0;for(this.lastCommnetIndex&&this.comments[this.lastCommnetIndex].time<=this.lastCommnetUpdateTime&&(t=this.lastCommnetIndex);++t<this.comments.length;)if(!(this.comments[t].time<=this.lastCommnetUpdateTime)){if(this.comments[t].time>e)break;switch(this.comments[t].pos){case"bottom":this.commentButtonPreQueue.push(this.comments[t]);break;case"top":this.commentTopPreQueue.push(this.comments[t]);break;default:this.commentLoopPreQueue.push(this.comments[t])}this.lastCommnetIndex=t}}try{this.drawComment()}catch(o){}this.lastCommnetUpdateTime=e}}}},{"./createElement":7}],4:[function(e,t){function o(e){return Array.prototype.slice.call(e)}function n(e,t,o,n){function i(t){var o=(t.clientX-e.parentNode.getBoundingClientRect().left)/e.parentNode.offsetWidth;return Math.min(Math.max(o,0),1)}function r(t){1==t.which&&(c=!0,e.draging=!0,s(t))}function s(e){if(1==e.which&&c===!0){var t=i(e);o(t)}}function a(t){if(1==t.which&&c===!0){var r=i(t);o(r),n(r),c=!1,delete e.draging}}var c=!1;o=o||function(){},n=n||function(){},e.parentNode.addEventListener("mousedown",r),t.addEventListener("mousemove",s),t.addEventListener("mouseup",a)}var i=(e("./createElement"),e("./delegateClickByClassName")),r=e("./timeFormat");t.exports={init:function(){var e=this.iframe.contentDocument,t=i(e);t.on("play",this.onPlayClick,this),t.on("video-frame",this.onVideoClick,this),t.on("source",this.onSourceClick,this),t.on("allscreen",this.onAllScreenClick,this),t.on("fullscreen",this.onfullScreenClick,this),t.on("normalscreen",this.onNormalScreenClick,this),t.on("comments-btn",this.oncommentsBtnClick,this),e.documentElement.addEventListener("keydown",this.onKeyDown.bind(this),!1),this.DOMs.player.addEventListener("mousemove",this.onMouseActive.bind(this)),n(this.DOMs.progress_anchor,e,this.onProgressAnchorWillSet.bind(this),this.onProgressAnchorSet.bind(this)),n(this.DOMs.volume_anchor,e,this.onVolumeAnchorWillSet.bind(this))},onKeyDown:function(e){switch(e.preventDefault(),e.keyCode){case 32:this.onPlayClick();break;case 39:this.video.currentTime=Math.min(this.video.duration,this.video.currentTime+10);break;case 37:this.video.currentTime=Math.max(0,this.video.currentTime-10);break;case 38:this.video.volume=Math.min(1,this.video.volume+.1),this.DOMs.volume_anchor.style.width=100*this.video.volume+"%";break;case 40:this.video.volume=Math.max(0,this.video.volume-.1),this.DOMs.volume_anchor.style.width=100*this.video.volume+"%";break;case 65:this.DOMs.player.classList.contains("allscreen")?this.onNormalScreenClick():this.onAllScreenClick();break;case 70:this.DOMs.player.classList.contains("fullscreen")||this.onfullScreenClick()}},onVideoClick:function(){void 0==this.videoClickDblTimer?this.videoClickDblTimer=setTimeout(function(){this.videoClickDblTimer=void 0,this.onPlayClick()}.bind(this),300):(clearTimeout(this.videoClickDblTimer),this.videoClickDblTimer=void 0,document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?this.onNormalScreenClick():this.onfullScreenClick())},onMouseActive:function(){this.DOMs.player.classList.add("active"),clearTimeout(this.MouseActiveTimer),this.MouseActiveTimer=setTimeout(function(){this.DOMs.player.classList.remove("active")}.bind(this),1e3)},onPlayClick:function(){this.DOMs.play.classList.contains("paused")?(this.video.play(),this.DOMs.play.classList.remove("paused")):(this.video.pause(),this.DOMs.play.classList.add("paused"))},onSourceClick:function(e){e.classList.contains("curr")||(this.video.preloadStartTime=this.video.currentTime,this.video.src=this.sourceList[0|e.getAttribute("sourceIndex")][1],o(e.parentNode.childNodes).forEach(function(t){e===t?t.classList.add("curr"):t.classList.remove("curr")}.bind(this)))},onProgressAnchorWillSet:function(e){var t=this.video.duration,o=t*e;this.DOMs.current.innerHTML=r(o),this.DOMs.duration.innerHTML=r(t),this.DOMs.progress_anchor.style.width=100*e+"%"},onProgressAnchorSet:function(e){this.video.currentTime=this.video.duration*e},onVolumeAnchorWillSet:function(e){this.video.volume=e,this.DOMs.volume_anchor.style.width=100*e+"%"},onAllScreenClick:function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;this.iframe.style.cssText=";position:fixed;top:0;left:0;width:"+e+"px;height:"+t+"px;z-index:999999;",this.allScreenWinResizeFunction=this.allScreenWinResizeFunction||function(){this.iframe.style.width=document.documentElement.clientWidth+"px",this.iframe.style.height=document.documentElement.clientHeight+"px"}.bind(this),window.removeEventListener("resize",this.allScreenWinResizeFunction),window.addEventListener("resize",this.allScreenWinResizeFunction),this.DOMs.player.classList.add("allscreen")},onfullScreenClick:function(){["webkitRequestFullScreen","mozRequestFullScreen","requestFullScreen"].forEach(function(e){this.DOMs.player[e]&&this.DOMs.player[e]()}.bind(this)),this.onMouseActive()},onNormalScreenClick:function(){window.removeEventListener("resize",this.allScreenWinResizeFunction),this.iframe.style.cssText=";width:"+this.size[0]+"px;height:"+this.size[1]+"px;",["webkitCancelFullScreen","mozCancelFullScreen","cancelFullScreen"].forEach(function(e){document[e]&&document[e]()}),this.DOMs.player.classList.remove("allscreen")},oncommentsBtnClick:function(){this.enableComment=!this.DOMs["comments-btn"].classList.contains("enable"),this.enableComment?(setTimeout(function(){this.DOMs.comments.style.display="block"}.bind(this),80),this.DOMs["comments-btn"].classList.add("enable")):(this.DOMs.comments.style.display="none",this.DOMs["comments-btn"].classList.remove("enable"))}}},{"./createElement":7,"./delegateClickByClassName":8,"./timeFormat":14}],5:[function(e,t){var o=(e("./extend"),e("./createElement"));e("./parseDOMByClassNames"),t.exports={init:function(){var e=0;this.sourceList.forEach(function(t,n){o("li",{appendTo:this.DOMs.hd,sourceIndex:n,className:"source "+(n===e?"curr":""),innerHTML:t[0]})}.bind(this)),this.DOMs.video.src=this.sourceList[e][1]}}},{"./createElement":7,"./extend":9,"./parseDOMByClassNames":11}],6:[function(e,t){var o=e("./timeFormat");t.exports={init:function(){this.video.addEventListener("timeupdate",this.onVideoTimeUpdate.bind(this)),this.video.addEventListener("play",this.onVideoPlay.bind(this)),this.video.addEventListener("pause",this.onVideoTimePause.bind(this)),this.video.addEventListener("loadedmetadata",this.onVideoLoadedMetaData.bind(this)),setInterval(this.videoBuffered.bind(this),1e3),this.DOMs.volume_anchor.style.width=100*this.video.volume+"%"},onVideoTimeUpdate:function(){var e=this.video.currentTime,t=this.video.duration;this.DOMs.current.innerHTML=o(e),this.DOMs.duration.innerHTML=o(t),this.DOMs.progress_anchor.draging||(this.DOMs.progress_anchor.style.width=100*Math.min(Math.max(e/t,0),1)+"%")},videoBuffered:function(){var e=this.video.buffered,t=this.video.currentTime,o=0==e.length?0:e.end(e.length-1);this.DOMs.buffered_anchor.style.width=100*Math.min(Math.max(o/this.video.duration,0),1)+"%",0==o||t>=o?this.DOMs.player.classList.add("loading"):this.DOMs.player.classList.remove("loading")},onVideoPlay:function(){this.DOMs.play.classList.remove("paused")},onVideoTimePause:function(){this.DOMs.play.classList.add("paused")},onVideoLoadedMetaData:function(){this.video.preloadStartTime&&(this.video.currentTime=this.video.preloadStartTime,delete this.video.preloadStartTime)}}},{"./timeFormat":14}],7:[function(e,t){function o(e,t){var o=document.createElement(e);if("function"==typeof t)t.call(o);else for(var n in t)if(t.hasOwnProperty(n))switch(n){case"appendTo":t[n].appendChild(o);break;case"text":var i=document.createTextNode(t[n]);o.innerHTML="",o.appendChild(i);break;case"innerHTML":case"className":case"id":o[n]=t[n];break;case"style":var r=t[n];for(var s in r)r.hasOwnProperty(s)&&(o.style[s]=r[s]);break;default:o.setAttribute(n,t[n]+"")}return o}t.exports=o},{}],8:[function(e,t){function o(e){return Array.prototype.slice.call(e)}function n(e){this._eventMap={},this._rootElement=e,this._isRootElementBindedClick=!1,this._bindClickFunction=function(e){!function t(e,n){n&&n.nodeName&&(n.classList&&o(n.classList).forEach(function(t){e.trigger(t,n)}),t(e,n.parentNode))}(this,e.target)}.bind(this)}var i=e("./extend");i(n.prototype,{on:function(e,t,o){void 0===this._eventMap[e]&&(this._eventMap[e]=[]),this._eventMap[e].push([t,o]),this._isRootElementBindedClick||(_isRootElementBindedClick=!0,this._rootElement.addEventListener("click",this._bindClickFunction,!1))},off:function(e,t){if(void 0!=this._eventMap[e])for(var o=this._eventMap[e].length;o--;)if(this._eventMap[e][o][0]===t){this._eventMap[e].splice(o,1);break}for(var n in this._eventMap)break;void 0===n&&this._isRootElementBindedClick&&(_isRootElementBindedClick=!1,this._rootElement.removeEventListener("click",this._bindClickFunction,!1))},trigger:function(e,t){t=void 0===t?this._rootElement.getElementsByTagNames(e):[t],t.forEach(function(t){(this._eventMap[e]||[]).forEach(function(e){e[0].call(e[1],t)})}.bind(this))}}),t.exports=function(e){return new n(e)}},{"./extend":9}],9:[function(e,t){function o(e){for(var t,o=arguments.length,n=1;o>n;){t=arguments[n++];for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}return e}t.exports=o},{}],10:[function(e){function t(e,t,o,n){this.id=e,this.size=t.split("x"),this.sourceList=o||[],this.comments=n,this.init()}e("./component")(t,e("./component_build"),e("./component_event"),e("./component_video"),e("./component_source"),e("./component_comments")),o=t},{"./component":1,"./component_build":2,"./component_comments":3,"./component_event":4,"./component_source":5,"./component_video":6}],11:[function(e,t){function o(e,t){var o={};return t.forEach(function(t){o[t]=e.getElementsByClassName(t)[0]}),o}t.exports=o},{}],12:[function(e,t){t.exports='* { margin:0; padding:0; }body { font-family: "PingHei","Lucida Grande", "Lucida Sans Unicode", "STHeiti", "Helvetica","Arial","Verdana","sans-serif"; font-size:16px;}html, body, .player { height: 100%; }.player:-webkit-full-screen { width: 100%; cursor:url(data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==); }.player:-moz-full-screen { width: 100%; cursor:url(data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==); }.player:full-screen { width: 100%; cursor:url(data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==); }.player {		border-radius: 3px;	overflow: hidden;	position: relative;	cursor: default;	-webkit-user-select: none;	-moz-user-select: none;	user-select: none;}.video-frame {	box-sizing: border-box;	padding-bottom: 50px;	height: 100%;	overflow: hidden;	position: relative;}.video-frame .comments{	position: absolute;	top:0;left:0;	width:100%;	height:100%;	-webkit-transform:translateZ(0);	-moz-transform:translateZ(0);	transform:translateZ(0);}.player:-webkit-full-screen .video-frame { padding-bottom: 0px; }.player:-moz-full-screen .video-frame { padding-bottom: 0px; }.player:full-screen .video-frame{ padding-bottom: 0px; }.video {	width: 100%;	height: 100%;	background: #000000;}.controller {	position: absolute;	bottom: 0px;	left:0;	right:0;	background: #24272A;	height: 50px;}.controller .loading-icon {	display: none;	position: absolute;	width: 20px;	height: 20px;	line-height: 20px;	text-align: center;	font-size: 20px;	color: #ffffff;	top: -30px;	right: 10px;}.player.loading .controller .loading-icon {	display: block;}.player:-webkit-full-screen .controller {	-webkit-transform:translateY(50px);	-webkit-transition: -webkit-transform 0.3s ease;}.player:-moz-full-screen .controller {	-moz-transform:translateY(50px);	-moz-transition: -moz-transform 0.3s ease;}.player:full-screen .controller {	transform:translateY(50px);	transition: transform 0.3s ease;}.player.active:-webkit-full-screen {	cursor: default;}.player.active:-moz-full-screen {	cursor: default;}.player.active:full-screen {	cursor: default;}.player.active:-webkit-full-screen .controller,.player:-webkit-full-screen .controller:hover {	-webkit-transform:translateY(0);	cursor: default;}.player.active:-moz-full-screen .controller,.player:-moz-full-screen .controller:hover {	-moz-transform:translateY(0);	cursor: default;}.player.active:full-screen .controller.player:full-screen .controller:hover {	transform:translateY(0);	cursor: default;}.player.active:-webkit-full-screen .controller .progress .progress_anchor:after,.player:-webkit-full-screen .controller:hover .progress .progress_anchor:after {	height:12px;}.player.active:-moz-full-screen .controller .progress .progress_anchor:after,.player:-moz-full-screen .controller:hover .progress .progress_anchor:after {	height:12px;}.player.active:full-screen .controller .progress .progress_anchor:after,.player:full-screen .controller:hover .progress .progress_anchor:after {	height:12px;}.player:-webkit-full-screen .controller .progress .progress_anchor:after {	height:4px;}.player:-moz-full-screen .controller .progress .progress_anchor:after {	height:4px;}.player:full-screen .controller .progress .progress_anchor:after {	height:4px;}.controller .progress {	position: absolute;	top:0px;	left:0;	right:0;	border-right: 4px solid #181A1D;	border-left: 8px solid #DF6558;	height: 4px;	background: #181A1D;	z-index:1;	-webkit-transform: translateZ(0);	-moz-transform: translateZ(0);	transform: translateZ(0);}.controller .progress:after {	content:"";	display: block;	position: absolute;	top:0px;	left:0;	right:0;	bottom:-10px;	height: 10px;}.controller .progress .anchor {	height: 4px;	background: #DF6558;	position: absolute;	top:0;left:0;}.controller .progress .anchor:after {	content:"";	display: block;	width: 12px;	background: #DF6558;	position: absolute;	right:-4px;	top: 50%;	height: 12px;	box-shadow: 0 0 2px rgba(0,0,0, 0.4);	border-radius: 12px;	-webkit-transform: translateY(-50%);	-moz-transform: translateY(-50%);	transform: translateY(-50%);}.controller .progress .anchor.buffered_anchor {		position: relative;	background: rgba(255,255,255,0.1);}.controller .progress .anchor.buffered_anchor:after {	box-shadow: none;	height: 4px;	width: 4px;	border-radius: 0;	background: rgba(255,255,255,0.1);}.controller .right {	height: 50px;	position: absolute;	top:0;	left:10px;	right:10px;	pointer-events: none;}.controller .play,.controller .volume,.controller .time,.controller .hd,.controller .allscreen,.controller .normalscreen,.controller .comments-btn,.controller .fullscreen {	padding-top:4px;	height: 46px;	line-height: 50px;	text-align: center;	color: #eeeeee;	float:left;	text-shadow:0 0 2px rgba(0,0,0,0.5);	pointer-events: auto;}.controller .hd,.controller .allscreen,.controller .normalscreen,.controller .comments-btn,.controller .fullscreen {	float:right;}.controller .play {	width: 36px;	padding-left: 10px;	cursor: pointer;}.controller .play:after {	font-family: "FontAwesome";	content: "";}.controller .play.paused:after {	content: "";}.controller .volume {	min-width: 30px;	position: relative;	overflow: hidden;	-webkit-transition: min-width 0.3s ease 0.5s;	-moz-transition: min-width 0.3s ease 0.5s;	transition: min-width 0.3s ease 0.5s;}.controller .volume:hover {	min-width: 128px;}.controller .volume:before {	font-family: "FontAwesome";	content: "";	width: 36px;	display: block;}.controller .volume .progress {	width: 70px;	top: 27px;	left: 40px;}.controller .time {	font-size: 12px;	font-weight: bold;	padding-left: 10px;}.controller .time .current {	color: #DF6558;}.controller .fullscreen,.controller .allscreen,.controller .comments-btn,.controller .normalscreen {	width: 36px;	cursor: pointer;}.controller .comments-btn {	margin-right: -15px;	display: none;}.player.has-comments .controller .comments-btn {	display: block;}.controller .comments-btn:before {	font-family: "FontAwesome";	content: "";}.controller .comments-btn.enable:before {	color: #DF6558;}.controller .normalscreen {	display: none;}.player:-webkit-full-screen .controller .fullscreen,.player:-webkit-full-screen .controller .allscreen {	display: none;}.player:-webkit-full-screen .controller .normalscreen,.player.allscreen .controller .normalscreen {	display: block;}.player.allscreen .controller .allscreen {	display: none;}.controller .fullscreen:before {	font-family: "FontAwesome";	content: "";}.controller .allscreen:before {	font-family: "FontAwesome";	content: "";}.controller .normalscreen:before {	font-family: "FontAwesome";	content: "";}.controller .hd {	white-space:nowrap;	overflow: hidden;	margin-right: 10px;	text-align: right;}.controller .hd:hover li {	max-width: 300px;}.controller .hd li {	display: inline-block;	max-width: 0px;	-webkit-transition: max-width 0.8s ease 0.3s;	-moz-transition: max-width 0.8s ease 0.3s;	transition: max-width 0.8s ease 0.3s;	overflow: hidden;	font-size: 14px;	font-weight: bold;	position: relative;	cursor: pointer;}.controller .hd li:before {	content: "";	display: inline-block;	width:20px;}.controller .hd li:before {	content: "";	display: inline-block;	width:20px;}.controller .hd li.curr {	max-width: 300px;	cursor: default;	color: #DF6558;}.controller .hd li.curr:after {	content: "";	display: block;	position: absolute;	width:4px;	height:4px;	border-radius: 50%;	background: #ffffff;	left: 12px;	top: 23px;	opacity: 0;	-webkit-transition: opacity 0.5s ease 0.3s;	-moz-transition: opacity 0.5s ease 0.3s;	transition: opacity 0.5s ease 0.3s;}'},{}],13:[function(e,t){t.exports='<div class="player">	<div class="video-frame"><video class="video" autoplay="autoplay"></video><canvas class="comments"></canvas></div>	<div class="controller">		<div class="loading-icon fa fa-spin fa-circle-o-notch"></div>		<div class="progress">			<div class="anchor buffered_anchor" style="width:0%"></div>			<div class="anchor progress_anchor" style="width:0%"></div>		</div>		<div class="right">		 			 	<div class="fullscreen"></div>		 	<div class="allscreen"></div>		 	<div class="normalscreen"></div>		 	<ul class="hd"></ul>		 	<div class="comments-btn"></div>		 </div>		 <div class="left">		 	<div class="play paused"></div>		 	<div class="volume">			 	<div class="progress">			 		<div class="anchor volume_anchor" style="width:0%"></div>		 		</div>		 	</div>		 	<div class="time">		 		<span class="current">00:00:00</span> / <span class="duration">00:00:00</span>		 	</div>		 </div>	</div></div>'
},{}],14:[function(e,t){function o(e,t){return(Array(t).join(0)+e).slice(-t)}function n(e){var t,n=[];return[3600,60,1].forEach(function(i){n.push(o(t=e/i|0,2)),e-=t*i}),n.join(":")}t.exports=n},{}]},{},[10]),t.exports=o},{}],12:[function(e,t){function o(e,t){for(var o=decodeURI(e),n=f[t?"strict":"loose"].exec(o),i={attr:{},param:{},seg:{}},r=14;r--;)i.attr[p[r]]=n[r]||"";return i.param.query=s(i.attr.query),i.param.fragment=s(i.attr.fragment),i.seg.path=i.attr.path.replace(/^\/+|\/+$/g,"").split("/"),i.seg.fragment=i.attr.fragment.replace(/^\/+|\/+$/g,"").split("/"),i.attr.base=i.attr.host?(i.attr.protocol?i.attr.protocol+"://"+i.attr.host:i.attr.host)+(i.attr.port?":"+i.attr.port:""):"",i}function n(e,t){if(0===e[t].length)return e[t]={};var o={};for(var n in e[t])o[n]=e[t][n];return e[t]=o,o}function i(e,t,o,r){var s=e.shift();if(s){var a=t[o]=t[o]||[];"]"==s?d(a)?""!==r&&a.push(r):"object"==typeof a?a[u(a).length]=r:a=t[o]=[t[o],r]:~s.indexOf("]")?(s=s.substr(0,s.length-1),!v.test(s)&&d(a)&&(a=n(t,o)),i(e,a,s,r)):(!v.test(s)&&d(a)&&(a=n(t,o)),i(e,a,s,r))}else d(t[o])?t[o].push(r):t[o]="object"==typeof t[o]?r:"undefined"==typeof t[o]?r:[t[o],r]}function r(e,t,o){if(~t.indexOf("]")){var n=t.split("[");i(n,e,"base",o)}else{if(!v.test(t)&&d(e.base)){var r={};for(var s in e.base)r[s]=e.base[s];e.base=r}""!==t&&a(e.base,t,o)}return e}function s(e){return l(String(e).split(/&|;/),function(e,t){try{t=decodeURIComponent(t.replace(/\+/g," "))}catch(o){}var n=t.indexOf("="),i=c(t),s=t.substr(0,i||n),a=t.substr(i||n,t.length);return a=a.substr(a.indexOf("=")+1,a.length),""===s&&(s=t,a=""),r(e,s,a)},{base:{}}).base}function a(e,t,o){var n=e[t];"undefined"==typeof n?e[t]=o:d(n)?n.push(o):e[t]=[n,o]}function c(e){for(var t,o,n=e.length,i=0;n>i;++i)if(o=e[i],"]"==o&&(t=!1),"["==o&&(t=!0),"="==o&&!t)return i}function l(e,t){for(var o=0,n=e.length>>0,i=arguments[2];n>o;)o in e&&(i=t.call(void 0,i,e[o],o,e)),++o;return i}function d(e){return"[object Array]"===Object.prototype.toString.call(e)}function u(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&t.push(o);return t}function h(e,t){return 1===arguments.length&&e===!0&&(t=!0,e=void 0),t=t||!1,e=e||window.location.toString(),{data:o(e,t),attr:function(e){return e=m[e]||e,"undefined"!=typeof e?this.data.attr[e]:this.data.attr},param:function(e){return"undefined"!=typeof e?this.data.param.query[e]:this.data.param.query},fparam:function(e){return"undefined"!=typeof e?this.data.param.fragment[e]:this.data.param.fragment},segment:function(e){return"undefined"==typeof e?this.data.seg.path:(e=0>e?this.data.seg.path.length+e:e-1,this.data.seg.path[e])},fsegment:function(e){return"undefined"==typeof e?this.data.seg.fragment:(e=0>e?this.data.seg.fragment.length+e:e-1,this.data.seg.fragment[e])}}}var p=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],m={anchor:"fragment"},f={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},v=/^[0-9]+$/;t.exports=h},{}],13:[function(e,t){function o(e){var t=[];for(one in e)e.hasOwnProperty(one)&&t.push([one,e[one]].join("="));return t.join("&")}t.exports=o},{}],14:[function(e,t,o){function n(e,t){return(Array(t).join(0)+e).slice(-t)}var i=e("./purl"),r=e("./log"),s=e("./httpProxy");o.match=function(){var e=i(location.href);return e.attr("host").indexOf("bilibili")>=0&&/^\/video\/av\d+\/$/.test(e.attr("directory"))},o.getVideos=function(e){r("开始解析bilibli视频地址");var t=i(location.href),o=t.attr("directory").match(/^\/video\/av(\d+)\/$/)[1],a=function(){return pageMatch=t.attr("file").match(/^index\_(\d+)\.html$/),pageMatch?pageMatch[1]:1}();s("http://m.acg.tv/m/html5","get",{aid:o,page:a},function(t){if(t&&t.src){r('获取到<a href="'+t.src+'">视频地址</a>, 并开始解析bilibli弹幕');var o=[["bilibili",t.src]];s(t.cid,"get",{},function(t){if(t&&t.i){var i=t.i.d;i=i.map(function(e){var t=e["@p"].split(",");switch(0|t[1]){case 4:t[1]="bottom";break;case 5:t[1]="top";break;default:t[1]="loop"}return{time:parseFloat(t[0]),pos:t[1],color:"#"+n((0|t[3]).toString(16),6),text:e["#text"]}}).sort(function(e,t){return e.time-t.time}),r("一切顺利开始播放",2),e(o,i)}else r("开始解析bilibli弹幕失败, 但勉强可以播放",2),e(o)},{gzinflate:1,xml:1})}else r("解析bilibli视频地址失败",2),e(!1)})}},{"./httpProxy":6,"./log":8,"./purl":12}],15:[function(require,module,exports){function getCookie(e){return document.cookie.length>0&&(c_start=document.cookie.indexOf(e+"="),-1!=c_start)?(c_start=c_start+e.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""}var canPlayM3U8=require("./canPlayM3U8"),queryString=require("./queryString"),ajax=require("./ajax"),httpProxy=require("./httpProxy"),log=require("./log");exports.match=function(){return/^http:\/\/www\.iqiyi\.com/.test(location.href)&&!!window.Q.PageInfo},exports.getVideos=function(callback){var uid="";try{uid=JSON.parse(getCookie("P00002")).uid}catch(e){}var cupid="qc_100001_100102",tvId=window.Q.PageInfo.playPageInfo.tvId,albumId=window.Q.PageInfo.playPageInfo.albumId,vid=document.getElementById("flashbox").getAttribute("data-player-videoid"),httpProxyOpts={text:!0,ua:"Mozilla/5.0 (iPhone; CPU iPhone OS 8_1 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) Version/8.0 Mobile/12B410 Safari/600.1.4"};httpProxy(location.href.replace("www.iqiyi","m.iqiyi"),"get",{},function(rs){var m=rs.match(/<script[^>]*>(eval.*)(?=<\/script>)<\/script>/);eval(m[1]);var param=weorjjigh(tvId);param.uid=uid,param.cupid=cupid,param.platForm="h5",param.type=canPlayM3U8?"m3u8":"mp4",param.qypid=tvId+"_21",ajax({url:"http://cache.m.iqiyi.com/jp/tmts/"+tvId+"/"+vid+"/",jsonp:!0,param:param,callback:function(e){var t=[];e.data.m3utx.length>0&&t.push(["高清",e.data.m3utx]),e.data.m3u.length>0&&t.push(["标清",e.data.m3u]),callback(t)}})},httpProxyOpts)}},{"./ajax":1,"./canPlayM3U8":2,"./httpProxy":6,"./log":8,"./queryString":13}],16:[function(e,t,o){var n=e("./canPlayM3U8"),i=e("./ajax"),r=e("./log"),s=e("./seeker_youku");o.match=function(){var e=window.iid||window.pageConfig&&window.pageConfig.iid||window.itemData&&window.itemData.iid,t=window.itemData&&window.itemData.vcode;return/tudou\.com/.test(window.location.host)&&(t||e)},o.getVideos=function(e){var t=window.itemData&&window.itemData.vcode;if(t)return s.parseYoukuCode(t,e);var o=window.iid||window.pageConfig&&window.pageConfig.iid||window.itemData&&window.itemData.iid,a=function(e){var t,n=[["原画","http://vr.tudou.com/v2proxy/v2.m3u8?it="+o+"&st=5"],["超清","http://vr.tudou.com/v2proxy/v2.m3u8?it="+o+"&st=4"],["高清","http://vr.tudou.com/v2proxy/v2.m3u8?it="+o+"&st=3"],["标清","http://vr.tudou.com/v2proxy/v2.m3u8?it="+o+"&st=2"]];window.itemData&&window.itemData.segs&&(n=[],t=JSON.parse(window.itemData.segs),t[5]&&n.push(["原画","http://vr.tudou.com/v2proxy/v2.m3u8?it="+o+"&st=5"]),t[4]&&n.push(["超清","http://vr.tudou.com/v2proxy/v2.m3u8?it="+o+"&st=4"]),t[3]&&n.push(["高清","http://vr.tudou.com/v2proxy/v2.m3u8?it="+o+"&st=3"]),t[2]&&n.push(["标清","http://vr.tudou.com/v2proxy/v2.m3u8?it="+o+"&st=2"])),r("解析tudou视频地址成功 "+n.map(function(e){return"<a href="+e[1]+">"+e[0]+"</a>"}).join(" "),2),e(n)},c=function(e){i({url:"http://vr.tudou.com/v2proxy/v2.js",param:{it:o,st:"52%2C53%2C54"},jsonp:"jsonp",callbck:function(t){if(-1===t||-1==t.code)return r("解析tudou视频地址失败");for(var o=[],n=0,i=t.urls.length;i>n;n++)o.push([n,t.urls[n]]);return r("解析tudou视频地址成功 "+o.map(function(e){return"<a href="+e[1]+">"+e[0]+"</a>"}).join(" "),2),e(o)}})};n?a(e):c(e)}},{"./ajax":1,"./canPlayM3U8":2,"./log":8,"./seeker_youku":17}],17:[function(e,t,o){var n=e("./canPlayM3U8"),i=e("./ajax"),r=e("./log");o.match=function(){return/v\.youku\.com/.test(location.host)&&!!window.videoId};var s=o.parseYoukuCode=function(e,t){function o(e){if(!e)return"";var t,o,n,i,r,e=e.toString(),s=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];for(i=e.length,n=0,r="";i>n;){do t=s[255&e.charCodeAt(n++)];while(i>n&&-1==t);if(-1==t)break;do o=s[255&e.charCodeAt(n++)];while(i>n&&-1==o);if(-1==o)break;r+=String.fromCharCode(t<<2|(48&o)>>4);do{if(t=255&e.charCodeAt(n++),61==t)return r;t=s[t]}while(i>n&&-1==t);if(-1==t)break;r+=String.fromCharCode((15&o)<<4|(60&t)>>2);do{if(o=255&e.charCodeAt(n++),61==o)return r;o=s[o]}while(i>n&&-1==o);if(-1==o)break;r+=String.fromCharCode((3&t)<<6|o)}return r}function s(e){if(!e)return"";var t,o,n,i,r,s,e=e.toString();for(n=e.length,o=0,t="";n>o;){if(i=255&e.charCodeAt(o++),o==n){t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>2),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((3&i)<<4),t+="==";break}if(r=e.charCodeAt(o++),o==n){t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>2),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((3&i)<<4|(240&r)>>4),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((15&r)<<2),t+="=";break}s=e.charCodeAt(o++),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>2),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((3&i)<<4|(240&r)>>4),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((15&r)<<2|(192&s)>>6),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&s)}return t}function a(e,t){for(var o,n=[],i=0,r="",s=0;256>s;s++)n[s]=s;for(s=0;256>s;s++)i=(i+n[s]+e.charCodeAt(s%e.length))%256,o=n[s],n[s]=n[i],n[i]=o;for(var a=i=s=0;a<t.length;a++)s=(s+1)%256,i=(i+n[s])%256,o=n[s],n[s]=n[i],n[i]=o,r+=String.fromCharCode(t.charCodeAt(a)^n[(n[s]+n[i])%256]);return r}function c(e,t){for(var o=[],n=0;n<e.length;n++){for(var i=0,i="a"<=e[n]&&"z">=e[n]?e[n].charCodeAt(0)-97:e[n]-0+26,r=0;36>r;r++)if(t[r]==i){i=r;break}o[n]=i>25?i-26:String.fromCharCode(i+97)}return o.join("")}function l(e,t){this._sid=h,this._seed=e.seed,this._fileType=t;var o=new d(this._seed);this._streamFileIds=e.streamfileids,this._videoSegsDic={};for(t in e.segs){for(var n=[],i=0,r=0;r<e.segs[t].length;r++){var s=e.segs[t][r],a={};a.no=s.no,a.size=s.size,a.seconds=s.seconds,s.k&&(a.key=s.k),a.fileId=this.getFileId(e.streamfileids,t,parseInt(r),o),a.type=t,a.src=this.getVideoSrc(s.no,e,t,a.fileId),n[i++]=a}this._videoSegsDic[t]=n}}function d(e){this._randomSeed=e,this.cg_hun()}r("开始解析youku视频地址");var u,h,p,m="b4et",f="boa4",v="4",g="1";d.prototype={cg_hun:function(){this._cgStr="";for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ/\\:._-1234567890",t=e.length,o=0;t>o;o++){var n=parseInt(this.ran()*e.length);this._cgStr+=e.charAt(n),e=e.split(e.charAt(n)).join("")}},cg_fun:function(e){for(var e=e.split("*"),t="",o=0;o<e.length-1;o++)t+=this._cgStr.charAt(e[o]);return t},ran:function(){return this._randomSeed=(211*this._randomSeed+30031)%65536,this._randomSeed/65536}},l.prototype={getFileId:function(e,t,o,n){for(var i in e)if(i==t){streamFid=e[i];break}return""==streamFid?"":(t=n.cg_fun(streamFid),e=t.slice(0,8),o=o.toString(16),1==o.length&&(o="0"+o),o=o.toUpperCase(),t=t.slice(10,t.length),e+o+t)},getVideoSrc:function(e,t,o,n,i,r){if(!t.videoid||!o)return"";var l={flv:0,flvhd:0,mp4:1,hd2:2,"3gphd":1,"3gp":0}[o],d={flv:"flv",mp4:"mp4",hd2:"flv","3gphd":"mp4","3gp":"flv"}[o],m=e.toString(16);1==m.length&&(m="0"+m);var v=t.segs[o][e].seconds,e=t.segs[o][e].k;return(""==e||-1==e)&&(e=t.key2+t.key1),o="",t.show&&(o=t.show.show_paid?"&ypremium=1":"&ymovie=1"),t="/player/getFlvPath/sid/"+h+"_"+m+"/st/"+d+"/fileid/"+n+"?K="+e+"&hd="+l+"&myp=0&ts="+v+"&ypp=0"+o,n=encodeURIComponent(s(a(c(f+"poz"+g,[19,1,4,7,30,14,28,8,24,17,6,35,34,16,9,10,13,22,32,29,31,21,18,3,2,23,25,27,11,20,5,15,12,0,33,26]).toString(),h+"_"+n+"_"+p))),t=t+("&ep="+n)+"&ctype=12&ev=1&token="+p,t+="&oip="+u.data[0].ip,"http://k.youku.com"+(t+((i?"/password/"+i:"")+(r?r:"")))}},i({url:"http://v.youku.com/player/getPlaylist/VideoIDS/"+e+"/Pf/4/ctype/12/ev/1",jsonp:"__callback",callback:function(i){-1==i&&r("解析youku视频地址失败",2),u=i;var d=i.data[0],y=a(c(m+"o0b"+v,[19,1,4,7,30,14,28,8,24,17,6,35,34,16,9,10,13,22,32,29,31,21,18,3,2,23,25,27,11,20,5,15,12,0,33,26]).toString(),o(d.ep));if(y=y.split("_"),h=y[0],p=y[1],!/PlayStation/.test(window.navigator.userAgent)&&n){var b=encodeURIComponent(s(a(c(f+"poz"+g,[19,1,4,7,30,14,28,8,24,17,6,35,34,16,9,10,13,22,32,29,31,21,18,3,2,23,25,27,11,20,5,15,12,0,33,26]).toString(),h+"_"+e+"_"+p))),x=d.ip,w=[["超清","http://pl.youku.com/playlist/m3u8?vid="+e+"&type=hd2&ctype=12&keyframe=1&ep="+b+"&sid="+h+"&token="+p+"&ev=1&oip="+x],["高清","http://pl.youku.com/playlist/m3u8?vid="+e+"&type=mp4&ctype=12&keyframe=1&ep="+b+"&sid="+h+"&token="+p+"&ev=1&oip="+x],["标清","http://pl.youku.com/playlist/m3u8?vid="+e+"&type=flv&ctype=12&keyframe=1&ep="+b+"&sid="+h+"&token="+p+"&ev=1&oip="+x]];r("解析youku视频地址成功 "+w.map(function(e){return"<a href="+e[1]+">"+e[0]+"</a>"}).join(" "),2),t(w)}else{var k=new l(d),w=[["标清",k._videoSegsDic["3gphd"][0].src]];r("解析youku视频地址成功 "+w.map(function(e){return"<a href="+e[1]+">"+e[0]+"</a>"}).join(" "),2),t(w)}}})};o.getVideos=function(e){s(window.videoId,e)}},{"./ajax":1,"./canPlayM3U8":2,"./log":8}],18:[function(e,t){t.exports=[e("./seeker_bilibili"),e("./seeker_youku"),e("./seeker_tudou"),e("./seeker_iqiyi")]},{"./seeker_bilibili":14,"./seeker_iqiyi":15,"./seeker_tudou":16,"./seeker_youku":17}]},{},[4]);